#三角形绘制

---

我们将初步使用GLSL着色器语言，了解OpenGL ES的开发流程。
Android中GLSurfaceView集成了集成了EGL，所以我们所有的展示都会在GLSurfaceView控件上。(EGL会在后面内容讲解)

1. **GLSurfaceView设置**
    ```
    //1.1 设置OpenGLES版本号
    mGLView.setEGLContextClientVersion(2);
    //1.2 设置渲染器
    mGLView.setRenderer(new TriangleRender());
    //1.3设置渲染模式：
    //RENDERMODE_WHEN_DIRTY 被动渲染  调用requestRender()方法时才会绘制下一帧。
    //RENDERMODE_CONTINUOUSLY 主动渲染
    mGLView.setRenderMode(GLSurfaceView.RENDERMODE_CONTINUOUSLY);
    ```
2. **编写渲染器**
    
    TriangleRender需要实现GLSurfaceView.Renderer并实现三个方法：
    ```
    /**
     * 界面被创建时被调用
     * @param gl
     * @param config
     */
    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        onCreate();
    }

    /**
     * 界面改变时被调用
     * @param gl
     * @param width
     * @param height
     */
    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        onChange(width,height);
    }

    /**
     * 绘制一帧内容时被调用
     * @param gl
     */
    @Override
    public void onDrawFrame(GL10 gl) {
        onDraw();
    }
    ```
    2.1 **onCreate()方法**
    ```
    @Override
    public void onCreate() {
        //设置背景色，普通的setBackground()对GLSurfaceView无效
        GLES20.glClearColor(0.5f, 0.5f, 0.5f, 0.5f);
    }
    ```